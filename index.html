<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jan Arroyo</title>
  <link href="styles.css" rel="stylesheet" />
  <style>
    :root{
      --ink:#0f172a; --muted:#6b7280; --bd:#e5e7eb; --card:#ffffff;
      --shadow:0 18px 50px rgba(17,19,24,.12); --bezier:cubic-bezier(.22,.61,.36,1);
      --maxw:1080px; --mediaH:clamp(420px,62vh,780px);
    }
    html,body{background:#fafbfc;color:#0f172a}
    .container{width:min(var(--maxw),92vw);margin-inline:auto}

    /* NAV */
    header.navbar{position:sticky;top:0;z-index:20;background:#fff;border-bottom:1px solid #f1f5f9;backdrop-filter:saturate(140%) blur(6px)}
    .nav-inner{display:flex;align-items:center;justify-content:space-between;padding:14px 2px}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:inherit;font-weight:800}
    .brand img{width:30px;height:30px;border-radius:8px;object-fit:cover}
    .nav-links a{color:#111827;text-decoration:none;margin-left:18px;font-weight:600;font-size:14.5px}
    .nav-links a:hover{opacity:.75}

    /* HERO */
    .hero{padding:54px 0 22px}
    .hero-grid{display:grid;grid-template-columns:1.05fr .95fr;gap:26px;align-items:center}
    @media (max-width:900px){.hero-grid{grid-template-columns:1fr}}
    .hero h1{font-size:clamp(28px,5vw,44px);line-height:1.1;margin:0 0 10px;font-weight:800}
    .hero p{color:var(--muted);font-size:clamp(15px,2vw,18px);line-height:1.6;margin:0}

    /* Hover flip (Hawaii -> about) */
    .flip-wrap{perspective:1200px}
    .flip{position:relative;width:100%;aspect-ratio:3/4;border-radius:18px;box-shadow:0 18px 50px rgba(17,19,24,.16);
      transform-style:preserve-3d;transition:transform .9s var(--bezier)}
    .flip:hover,.flip:focus-within{transform:rotateY(180deg)}
    .face{position:absolute;inset:0;border-radius:18px;overflow:hidden;backface-visibility:hidden;display:grid;place-items:center}
    .face img{width:100%;height:100%;object-fit:cover;display:block}
    .back{background:linear-gradient(180deg,#fff,#f8fafc);border:1px solid var(--bd);transform:rotateY(180deg);padding:26px 22px 22px;display:flex;flex-direction:column;align-items:center;text-align:center}
    .avatar{width:120px;height:120px;border-radius:999px;object-fit:cover;border:3px solid #fff;box-shadow:0 8px 20px rgba(17,19,24,.18);margin:-8px 0 10px}
    .back h3{margin:6px 0 6px;font-size:20px}
    .back p{margin:0 0 10px;color:#111827;line-height:1.7}
    .hint{position:absolute;right:10px;bottom:10px;background:rgba(255,255,255,.9);border:1px solid var(--bd);padding:6px 10px;border-radius:999px;font-size:12px}

    /* Sections */
    .section{padding:8px 0 0}
    .section h2{font-weight:800;font-size:clamp(22px,3.2vw,30px);margin:42px 0 12px}

    /* Lists */
    .list{list-style:none;margin:0;padding:0}
    .row{display:flex;align-items:center;justify-content:space-between;gap:18px;padding:12px 0;border-bottom:1px dashed rgba(17,19,24,.16);text-decoration:none;color:inherit}
    .left{display:flex;align-items:center;gap:12px;min-width:0}
    .logo{width:26px;height:26px;border-radius:6px;object-fit:cover;flex:0 0 auto}
    .meta{min-width:0;display:flex;gap:10px;align-items:center}
    .co{font-weight:700}
    .role{color:#6b7280;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .right{font-size:13px;color:#94a3b8;white-space:nowrap}
    @media (max-width:560px){ .role{display:none;} }

    /* Projects (Joanna-style: title on top, big media, minimal chrome) */
    .project{background:var(--card);border:1px solid var(--bd);border-radius:20px;box-shadow:var(--shadow);padding:16px 16px 18px}
    .project + .project{margin-top:32px}
    .project h3{font-size:clamp(18px,2.6vw,22px);margin:2px 4px 10px;font-weight:800}
    .project-grid{display:grid;grid-template-columns:1.2fr .95fr;gap:18px;align-items:start}
    @media (max-width:1020px){.project-grid{grid-template-columns:1fr}}
    .media{position:relative;border-radius:14px;overflow:hidden;border:1px solid var(--bd);background:#fff;min-height:var(--mediaH)}
    .viewport{width:100%;height:100%;display:grid;place-items:center}
    /* contain so CRM isn’t cropped */
    .viewport>video{width:100%;height:100%;object-fit:contain;background:#000}
    .pdf-canvas,.gallery-img{width:100%;height:100%;object-fit:contain;display:block;background:#fff}
    .ctrl{position:absolute;top:50%;transform:translateY(-50%);z-index:3;width:42px;height:42px;border-radius:999px;border:1px solid var(--bd);
      background:rgba(255,255,255,.96);backdrop-filter:saturate(120%) blur(3px);display:grid;place-items:center;user-select:none;box-shadow:0 10px 22px rgba(17,19,24,.16)}
    .ctrl.prev{left:12px}.ctrl.next{right:12px}
    .ctrl svg{width:20px;height:20px}
    .text{padding:6px 4px}
    .text p{margin:0;color:#111827;font-size:16px;line-height:1.75}

    /* Spotify */
    .spotify{margin-top:16px;border:1px solid var(--bd);border-radius:14px;overflow:hidden;box-shadow:var(--shadow)}

    footer{padding:36px 0 64px;color:#94a3b8;font-size:14px}
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="navbar">
    <div class="container nav-inner">
      <a class="brand" href="#top">
        <img src="images/IMG_8427.PNG" alt="Jan Arroyo" onerror="this.src='images/headshot.jpg'">
        <span>Jan Arroyo</span>
      </a>
      <nav class="nav-links">
        <a href="#work">Work</a>
        <a href="#involvements">Involvements</a>
        <a href="#projects">Projects</a>
        <a href="travel.html">Travel</a>
        <a href="races.html">Races</a>
        <a href="bake.html">Bake</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section id="top" class="hero">
    <div class="container hero-grid">
      <div>
        <h1>Hey, what's up!</h1>
        <p>I'm Jan Arroyo — studying CS &amp; Business at USC. I like building products, doing design &amp; research, and creating impact with community partners.</p>

        <!-- Spotify (swap to your playlist if you want) -->
        <div class="spotify">
          <iframe style="border-radius:0" src="https://open.spotify.com/embed/playlist/37i9dQZF1DXcBWIGoYBM5M?utm_source=generator"
                  width="100%" height="152" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
        </div>
      </div>

      <!-- Hover-flip card: Hawaii.JPG -> headshot + bio -->
      <div class="flip-wrap">
        <div class="flip" tabindex="0" aria-label="Hover or focus to flip">
          <div class="face front">
            <img src="images/Hawaii.JPG" alt="Hawaii — spring break"
                 onerror="this.src='images/Hawaii1.JPG'">
            <span class="hint">hover to flip</span>
          </div>
          <div class="face back">
            <img class="avatar" src="images/headshot.jpg" alt="Jan headshot" onerror="this.src='images/headshot.JPG'">
            <h3>Quick about me</h3>
            <p>LA kid who loves building with community orgs, good coffee, and running by the beach. CS + Business at USC. I like shipping things that actually get used.</p>
            <p>If I’m not at a laptop, I’m probably outside chasing a sunset or planning the next trip.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- WORK -->
  <section id="work" class="section">
    <div class="container">
      <h2>Work</h2>
      <ul class="list" aria-label="Work experience">
        <li><a class="row" href="#"><span class="left"><img class="logo" src="images/Marshall.JPG" alt=""><span class="meta"><span class="co">USC Marshall</span><span class="role">Peer Career Advisor – Tech</span></span></span><span class="right">Aug 2025</span></a></li>
        <li><a class="row" href="https://www.amazon.jobs/content/en/teams/devices-and-services/lab126" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/Amazon.JPG" alt=""><span class="meta"><span class="co">Amazon</span><span class="role">Technical Program Manager Intern</span></span></span><span class="right">May–Aug 2025</span></a></li>
        <li><a class="row" href="https://www.accenture.com/us-en/services/ecosystem-partners/microsoft" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/Accenture.JPG" alt=""><span class="meta"><span class="co">Accenture</span><span class="role">Strategy Tech Apps &amp; Dev Analyst Intern</span></span></span><span class="right">Jun–Aug 2024</span></a></li>
        <li><a class="row" href="https://www.apple.com/careers/us/work-at-apple/students.html" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/Apple.JPG" alt=""><span class="meta"><span class="co">Apple</span><span class="role">Product Management Intern</span></span></span><span class="right">Aug 2023–Jan 2024</span></a></li>
        <li><a class="row" href="https://www.microsoft.com/en-us/modernfinance/digitaltransformation.aspx" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/Microsoft.JPG" alt=""><span class="meta"><span class="co">Microsoft</span><span class="role">Finance Data Analyst Intern</span></span></span><span class="right">May–Aug 2023</span></a></li>
        <li><a class="row" href="https://worldfitforkids.org/" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/A-World-Fit-for-Kids.JPG" alt=""><span class="meta"><span class="co">A World Fit For Kids</span><span class="role">Strategy Consultant</span></span></span><span class="right">2022–2023</span></a></li>
        <li><a class="row" href="https://www.therams.com/news/rams-la-promise-fund-create-summer-internship-program-for-inglewood-unified-stud" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/LARAMS.JPG" alt=""><span class="meta"><span class="co">Los Angeles Rams</span><span class="role">Data &amp; Systems Analyst – Intern</span></span></span><span class="right">Jun–Aug 2021</span></a></li>
        <li><a class="row" href="https://www.therams.com/news/rams-la-promise-fund-create-summer-internship-program-for-inglewood-unified-stud" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/LACC.JPG" alt=""><span class="meta"><span class="co">LA Conservation Corps</span><span class="role">Project Lead</span></span></span><span class="right">Dec 2019–May 2020</span></a></li>
      </ul>
    </div>
  </section>

  <!-- INVOLVEMENTS -->
  <section id="involvements" class="section">
    <div class="container">
      <h2>Involvements</h2>
      <ul class="list" aria-label="Student & community involvement">
        <li><a class="row" href="https://www.uscbtg.org/" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/BTG.JPG" alt=""><span class="meta"><span class="co">Business Technology Group (USC)</span><span class="role">VP of Projects</span></span></span><span class="right">2024–Present</span></a></li>
        <li><a class="row" href="https://www.ey.com/en_us/about-us/corporate-responsibility/mentoring-of-the-future-workforce-strengthens-communities-and-careers" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/EY.JPG" alt=""><span class="meta"><span class="co">EY CMAP</span><span class="role">Education Strategy Consultant</span></span></span><span class="right">2023–Present</span></a></li>
        <li><a class="row" href="https://uscfgsa.carrd.co/" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/FGSA.JPG" alt=""><span class="meta"><span class="co">USC First-Generation Student Center</span><span class="role">Program Manager</span></span></span><span class="right">2023–2025</span></a></li>
        <li><a class="row" href="https://www.usclbsa.com/" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/LBSA.JPG" alt=""><span class="meta"><span class="co">Latino Business Student Association</span><span class="role">Member</span></span></span><span class="right">2023–2025</span></a></li>
        <li><a class="row" href="https://www.uscisa.org/" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/ISA.JPG" alt=""><span class="meta"><span class="co">International Student Assembly</span><span class="role">Advocacy &amp; Program Manager Intern</span></span></span><span class="right">2023–2024</span></a></li>
        <li><a class="row" href="https://partnershipla.org/who-we-are/" target="_blank" rel="noopener"><span class="left"><img class="logo" src="images/Partnership.JPG" alt=""><span class="meta"><span class="co">The LA Partnership</span><span class="role">Policy Advisory Board Member</span></span></span><span class="right">2021–2022</span></a></li>
      </ul>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projects" class="section">
    <div class="container">
      <h2>Projects &amp; Artifacts</h2>

      <!-- CRM VIDEO (contain, not cropped) -->
      <article class="project" id="crm">
        <h3>CRM Automation — Email Outreach Platform</h3>
        <div class="project-grid">
          <div class="media">
            <div class="viewport">
              <video controls playsinline>
                <source src="Projects/CRM_DEMO_small.mp4" type="video/mp4">
              </video>
            </div>
          </div>
          <div class="text">
            <p>I built a CRM that connects Google Sheets and Gmail with Python so outreach basically runs itself. It pulls fresh rows from Sheets, fills a template with merge fields, batches sends to stay under Gmail limits, retries failures, and logs results back to the sheet. With it live we hit <b>15,000+ contacts</b>, response rate lifted about <b>15%</b>, and total send time dropped to roughly <b>one-third</b> across three committees. New campaign = new sheet + a template. Simple, fast, reusable.</p>
          </div>
        </div>
      </article>

      <!-- QUOKKA (PDF deck with arrows; minimal chrome) -->
      <article class="project" id="quokka">
        <h3>Quokka Brew — Can Design Research &amp; Iterations</h3>
        <div class="project-grid">
          <div class="media deck" data-type="pdf-single" data-title="Quokka Brew — Design Research Deck" data-src="Projects/Quokka%20Brew.pdf" tabindex="0" aria-label="Open Quokka deck">
            <button class="ctrl prev" aria-label="Previous" data-act="prev">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="#111827" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <button class="ctrl next" aria-label="Next" data-act="next">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M9 6l6 6-6 6" stroke="#111827" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <div class="viewport"><canvas class="pdf-canvas"></canvas></div>
          </div>
          <div class="text">
            <p>We ran <b>60+ interviews</b> then pressure-tested concepts with the <b>10-ft / 5-ft / 1-ft rule</b>. Signal was clear: calmer neutrals read more “coffee,” the logo and health callouts need to hit at 5 ft, and flavor cues should be simple at 1 ft. We benchmarked against Rise, La Colombe, and Starbucks and turned that into <b>3 MVP layouts</b> the team could keep iterating. My role: synthesize the insights, push the layout changes, and make the visuals easier to recognize on shelf. It’s the kind of work where research actually changes the can — not just a deck.</p>
          </div>
        </div>
      </article>

      <!-- CLEAR CLINICAL (merged mid+final) -->
      <article class="project" id="clear-clinical">
        <h3>Clear Clinical — Product Strategy &amp; UX</h3>
        <div class="project-grid">
          <div class="media deck" data-type="pdf-merged" data-title="Clear Clinical — Mid + Final Presentations"
               data-srcs="Projects/MID%20SEMSES%20CLINICAL.pdf|Projects/MID%20SEMSES%20CLINICAL%20.pdf|Projects/MID%20SEMSES%20CLINICAL%20%28copy%29.pdf|Projects/FINAL%20PRESENTATION%20CLINICAL%20.pdf|Projects/FINAL%20PRESENTATION%20CLINICAL.pdf"
               tabindex="0" aria-label="Open Clear Clinical merged deck">
            <button class="ctrl prev" aria-label="Previous" data-act="prev">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="#111827" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <button class="ctrl next" aria-label="Next" data-act="next">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M9 6l6 6-6 6" stroke="#111827" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <div class="viewport"><canvas class="pdf-canvas"></canvas></div>
          </div>
          <div class="text">
            <p>Focus was adoption: interviews + competitive scan → staged roadmap. Nail the daily workflows first, then layer advanced features once the base is sticky. I framed the trade-offs and mapped the first shippable version so a small team could actually move.</p>
          </div>
        </div>
      </article>

      <!-- EY gallery (uses images/…) -->
      <article class="project" id="ey">
        <h3>EY Workshop — Design Thinking</h3>
        <div class="project-grid">
          <div class="media gallery" data-title="EY Workshop — Design Thinking"
               data-images="images/EY1.JPG|images/EY1.jpg,images/EY2.JPG|images/EY2.jpg,images/EY3.JPG|images/EY3.jpg,images/EY4.JPG|images/EY4.jpg"
               tabindex="0" aria-label="Open EY gallery">
            <button class="ctrl prev" aria-label="Previous" data-act="prev">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="#111827" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <button class="ctrl next" aria-label="Next" data-act="next">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M9 6l6 6-6 6" stroke="#111827" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <div class="viewport"><img class="gallery-img" alt="EY workshop"></div>
          </div>
          <div class="text">
            <p>Hands-on session for high school students. Keep it simple: frame the problem, sketch, test. The goal was confidence so they could run it on their own ideas after.</p>
          </div>
        </div>
      </article>

      <!-- Advocacy gallery -->
      <article class="project" id="advocacy">
        <h3>Policy Advocacy Day — Sacramento</h3>
        <div class="project-grid">
          <div class="media gallery" data-title="Policy Advocacy Day — Sacramento"
               data-images="images/Partnership_Advocacy_Day1.JPG|images/Partnership_Advocacy_Day1.jpg,images/Partnership_Advocacy_Day2.JPG|images/Partnership_Advocacy_Day2.jpg"
               tabindex="0" aria-label="Open Advocacy gallery">
            <button class="ctrl prev" aria-label="Previous" data-act="prev">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="#111827" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <button class="ctrl next" aria-label="Next" data-act="next">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M9 6l6 6-6 6" stroke="#111827" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <div class="viewport"><img class="gallery-img" alt="Policy advocacy"></div>
          </div>
          <div class="text">
            <p>We met with legislators to share student stories and push for youth programs. I prepped the team, aligned the asks, and made sure voices from our community were in the room.</p>
          </div>
        </div>
      </article>

      <!-- Magazine gallery -->
      <article class="project" id="mag">
        <h3>Magazine Feature</h3>
        <div class="project-grid">
          <div class="media gallery" data-title="Magazine Feature"
               data-images="images/Magazine1.JPG|images/Magazine1.jpg,images/Magazine2.JPG|images/Magazine2.jpg,images/Magazine3.JPG|images/Magazine3.jpg"
               tabindex="0" aria-label="Open magazine gallery">
            <button class="ctrl prev" aria-label="Previous" data-act="prev">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="#111827" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <button class="ctrl next" aria-label="Next" data-act="next">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M9 6l6 6-6 6" stroke="#111827" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <div class="viewport"><img class="gallery-img" alt="Magazine page"></div>
          </div>
          <div class="text">
            <p>Campus write-up on first-gen work, BTG projects, and why I like building with community partners. Nice to see the impact show up outside a resume line.</p>
          </div>
        </div>
      </article>

    </div>
  </section>

  <!-- LIGHTBOX -->
  <div id="lightbox" aria-hidden="true" style="display:none;place-items:center;position:fixed;inset:0;background:rgba(17,24,39,.35);backdrop-filter:blur(4px) saturate(1.05);z-index:100">
    <div class="lb-card" role="dialog" aria-modal="true" style="width:min(1080px,96vw);max-height:90vh;display:grid;grid-template-columns:1.2fr .8fr;gap:14px;background:linear-gradient(180deg,#fff,#fafafa);border:1px solid var(--bd);border-radius:18px;box-shadow:0 30px 80px rgba(17,24,39,.28);overflow:hidden;position:relative">
      <button id="lbClose" aria-label="Close" style="position:absolute;top:10px;right:10px;border:none;background:#111827;color:#fff;border-radius:999px;width:36px;height:36px;font-size:18px;cursor:pointer;box-shadow:0 8px 18px rgba(17,19,24,.2)">✕</button>
      <div style="padding:14px;display:grid;grid-template-rows:auto auto">
        <div id="stage" style="background:#000;border-radius:12px;border:1px solid var(--bd);display:grid;place-items:center;position:relative;overflow:hidden;height:min(78vh,760px)">
          <button id="lbPrev" aria-label="Previous" style="position:absolute;top:50%;transform:translateY(-50%);background:rgba(17,24,39,.75);color:#fff;border:none;border-radius:999px;width:34px;height:34px;display:grid;place-items:center;cursor:pointer;left:10px">‹</button>
          <canvas id="lbCanvas"></canvas>
          <img id="lbImg" alt="" />
          <button id="lbNext" aria-label="Next" style="position:absolute;top:50%;transform:translateY(-50%);background:rgba(17,24,39,.75);color:#fff;border:none;border-radius:999px;width:34px;height:34px;display:grid;place-items:center;cursor:pointer;right:10px">›</button>
        </div>
        <div id="thumbs" style="display:flex;gap:8px;overflow:auto;margin-top:10px;padding-bottom:6px"></div>
      </div>
      <div style="padding:16px 18px 18px 6px">
        <div id="lbTitle" style="font-weight:800;font-size:20px;margin:2px 0 2px">Viewer</div>
        <div id="lbSub" style="color:#6b7280;font-size:13px;margin-bottom:10px">—</div>
        <div id="lbNotes" style="line-height:1.6;font-size:15px;overflow:auto;max-height:calc(90vh - 190px)">Use ← → to navigate. Esc to close.</div>
      </div>
    </div>
  </div>

  <footer><div class="container">© <span id="y"></span> Jan Arroyo</div></footer>

  <!-- pdf.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

    /* Utilities */
    function viewportBounds(el){ const vp = el.querySelector('.viewport') || el; return { w: vp.clientWidth, h: vp.clientHeight }; }
    function fitPdfToCanvas(pdf, pageNum, canvas, maxW, maxH){
      return pdf.getPage(pageNum).then(page=>{
        const v1 = page.getViewport({scale:1});
        let scale = Math.min(maxW/v1.width, maxH/v1.height);
        const vp = page.getViewport({scale});
        const dpr = window.devicePixelRatio || 1;
        canvas.width = Math.floor(vp.width * dpr);
        canvas.height = Math.floor(vp.height * dpr);
        canvas.style.width = Math.floor(vp.width) + 'px';
        canvas.style.height = Math.floor(vp.height) + 'px';
        const ctx = canvas.getContext('2d', {alpha:false});
        const transform = dpr !== 1 ? [dpr,0,0,dpr,0,0] : null;
        return page.render({canvasContext:ctx, viewport:vp, transform}).promise;
      });
    }
    function pick(paths, cb){
      const list=(paths||"").split('|').map(s=>s.trim()).filter(Boolean);
      if(!list.length){ cb(""); return; }
      let i=0, img=new Image();
      (function tryNext(){
        if(i>=list.length){ cb(list[0]); return; }
        img=new Image();
        img.onload=()=>cb(list[i]);
        img.onerror=()=>{ i++; tryNext(); };
        img.src=list[i];
      })();
    }
    function preloadImages(paths){
      return new Promise(resolve=>{
        const good = []; let left = paths.length;
        if(!left) return resolve(good);
        paths.forEach(p=>{
          pick(p, ok=>{
            if(ok) good.push(ok);
            if(--left===0) resolve(good);
          });
        });
      });
    }

    /* PDF single */
    function wirePdfSingle(deck){
      const file = deck.dataset.src;
      const canvas = deck.querySelector('.pdf-canvas');
      const prev = deck.querySelector('[data-act="prev"]');
      const next = deck.querySelector('[data-act="next"]');
      let pdf=null, page=1, total=1, hover=false, rendering=false;

      function render(){
        if(!pdf || rendering) return; rendering=true;
        const {w,h} = viewportBounds(deck);
        fitPdfToCanvas(pdf,page,canvas,w,h).finally(()=>{ rendering=false; });
      }
      function go(d){ page=Math.min(total,Math.max(1,page+d)); render(); }

      deck.addEventListener('mouseenter',()=>hover=true);
      deck.addEventListener('mouseleave',()=>hover=false);
      deck.addEventListener('keydown',e=>{ if(e.key==='ArrowRight'){e.preventDefault();go(1)} if(e.key==='ArrowLeft'){e.preventDefault();go(-1)} });
      document.addEventListener('keydown',e=>{ if(!hover) return; if(e.key==='ArrowRight'){e.preventDefault();go(1)} if(e.key==='ArrowLeft'){e.preventDefault();go(-1)} });
      prev.addEventListener('click',e=>{ e.stopPropagation(); go(-1); });
      next.addEventListener('click',e=>{ e.stopPropagation(); go(1); });

      window.addEventListener('resize',render);
      pdfjsLib.getDocument(file).promise.then(p=>{ pdf=p; total=p.numPages; render(); });
    }

    /* PDF merged */
    function wirePdfMerged(deck){
      const files = deck.dataset.srcs.split('|').map(s=>s.trim()).filter(Boolean);
      const canvas = deck.querySelector('.pdf-canvas');
      const prev = deck.querySelector('[data-act="prev"]');
      const next = deck.querySelector('[data-act="next"]');
      let pdfs=[], pagesPer=[], total=0, curDoc=0, curPage=1, hover=false, rendering=false;

      function abs(){ let idx=0; for(let i=0;i<curDoc;i++) idx+=pagesPer[i]; return idx+curPage; }
      function render(){
        if(!pdfs.length || rendering) return; rendering=true;
        const {w,h} = viewportBounds(deck);
        const pdf = pdfs[curDoc];
        fitPdfToCanvas(pdf,curPage,canvas,w,h).finally(()=>{ rendering=false; });
      }
      function step(d){
        let a = Math.min(total, Math.max(1, abs()+d));
        let left=a, doc=0; while(left>pagesPer[doc]){ left-=pagesPer[doc]; doc++; }
        curDoc=doc; curPage=left; render();
      }

      deck.addEventListener('mouseenter',()=>hover=true);
      deck.addEventListener('mouseleave',()=>hover=false);
      deck.addEventListener('keydown',e=>{ if(e.key==='ArrowRight'){e.preventDefault();step(1)} if(e.key==='ArrowLeft'){e.preventDefault();step(-1)} });
      document.addEventListener('keydown',e=>{ if(!hover) return; if(e.key==='ArrowRight'){e.preventDefault();step(1)} if(e.key==='ArrowLeft'){e.preventDefault();step(-1)} });
      prev.addEventListener('click',e=>{ e.stopPropagation(); step(-1); });
      next.addEventListener('click',e=>{ e.stopPropagation(); step(1); });

      window.addEventListener('resize',render);
      Promise.all(files.map(f=>pdfjsLib.getDocument(f).promise).map(p=>p.catch(()=>null))).then(arr=>{
        pdfs = arr.filter(Boolean);
        pagesPer = pdfs.map(p=>p.numPages);
        total = pagesPer.reduce((a,b)=>a+b,0);
        curDoc=0; curPage=1; render();
      });
    }

    /* Image galleries */
    function wireGallery(gal){
      const raw = gal.dataset.images.split(',').map(s=>s.trim());
      const imgEl = gal.querySelector('.gallery-img');
      const prev = gal.querySelector('[data-act="prev"]');
      const next = gal.querySelector('[data-act="next"]');
      let imgs = [], i=0, hover=false;

      preloadImages(raw).then(valid=>{
        imgs = valid;
        if(!imgs.length){ prev.disabled = next.disabled = true; return; }
        set(true);
      });

      function set(initial=false){
        imgEl.onload = ()=>{};
        imgEl.src = imgs[i];
        prev.disabled=(i===0); next.disabled=(i===imgs.length-1);
      }
      function go(d){ i=Math.min(imgs.length-1, Math.max(0, i+d)); set(); }

      gal.addEventListener('mouseenter',()=>hover=true);
      gal.addEventListener('mouseleave',()=>hover=false);
      gal.addEventListener('keydown',e=>{ if(e.key==='ArrowRight'){e.preventDefault();go(1)} if(e.key==='ArrowLeft'){e.preventDefault();go(-1)} });
      document.addEventListener('keydown',e=>{ if(!hover) return; if(e.key==='ArrowRight'){e.preventDefault();go(1)} if(e.key==='ArrowLeft'){e.preventDefault();go(-1)} });

      prev.addEventListener('click',e=>{ e.stopPropagation(); go(-1); });
      next.addEventListener('click',e=>{ e.stopPropagation(); go(1); });
    }

    /* Wire everything */
    document.querySelectorAll('.media.deck[data-type="pdf-single"]').forEach(wirePdfSingle);
    document.querySelectorAll('.media.deck[data-type="pdf-merged"]').forEach(wirePdfMerged);
    document.querySelectorAll('.media.gallery').forEach(wireGallery);

    // Lightbox removed to keep the page ultra-minimal like Joanna’s. If you want it back, I can re-enable it.
  </script>
</body>
</html>

