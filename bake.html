<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bake ‚Äì Jan Arroyo</title>
  <link href="styles.css" rel="stylesheet" />
  <style>
    /* ===== Grid: 3 per row (2 / 1 on smaller screens) ===== */
    .rcp-grid{display:grid;gap:20px;grid-template-columns:repeat(3,1fr);}
    @media (max-width:1100px){.rcp-grid{grid-template-columns:repeat(2,1fr);}}
    @media (max-width:640px){.rcp-grid{grid-template-columns:1fr;}}

    /* ===== Cards ===== */
    .rcp-card{border-radius:16px;overflow:hidden;background:#fff;
      border:1px solid rgba(17,19,24,.08);box-shadow:0 6px 24px rgba(17,19,24,.06);
      transition:box-shadow .2s ease;}
    .rcp-card:hover{box-shadow:0 10px 28px rgba(17,19,24,.10);}
    .rcp-toggle{display:block;width:100%;padding:0;border:0;background:transparent;cursor:pointer;text-align:left;}
    .rcp-photo{position:relative;aspect-ratio:4/3;}
    .rcp-photo img{width:100%;height:100%;object-fit:cover;display:block;}
    .rcp-caption{position:absolute;left:0;right:0;bottom:0;padding:10px 12px;color:#fff;font-weight:700;
      background:linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0));text-shadow:0 1px 2px rgba(0,0,0,.5);}

    /* ===== Lightbox (cream + animated) ===== */
    :root { --modal-ms: 260ms; --easing: cubic-bezier(.2,.7,.2,1); }
    body.no-scroll{overflow:hidden;}

    .modal-backdrop{
      position:fixed; inset:0;
      background:rgba(255,248,240,.85);
      backdrop-filter:saturate(1.1) blur(2px);
      opacity:0; pointer-events:none; display:none;
      transition:opacity var(--modal-ms) var(--easing); z-index:60;
    }
    .modal-backdrop.open{display:block; opacity:1; pointer-events:auto;}
    .modal-backdrop.closing{opacity:0;}

    .modal-dialog{ position:fixed; inset:0; z-index:61; display:none; place-items:center; }
    .modal-dialog.visible{ display:grid; }                /* show first */
    .modal-dialog.open .modal-panel{ opacity:1; transform:none; } /* then animate in */
    .modal-dialog.closing .modal-panel{ opacity:0; transform: translateY(8px) scale(.985); }

    .modal-panel{
      background:#fffaf0; color:#1f2937;
      border:1px solid rgba(17,19,24,.08);
      border-radius:16px; max-width:920px; width:min(96vw,920px);
      box-shadow:0 20px 60px rgba(0,0,0,.25); overflow:hidden;
      opacity:0; transform: translateY(12px) scale(.98);
      transition: opacity var(--modal-ms) var(--easing), transform var(--modal-ms) var(--easing);
      will-change: opacity, transform;
    }
    .modal-head{
      display:flex; justify-content:space-between; align-items:center;
      padding:12px 16px; border-bottom:1px solid rgba(17,19,24,.08);
    }
    .modal-title{font-weight:700;}
    .modal-close{background:transparent;border:0;color:#111;font-size:22px;cursor:pointer;line-height:1;}

    .modal-body{
      padding:16px; display:grid; gap:16px;
      max-height:80vh; overflow:auto;  /* scroll if tall */
    }
    .modal-photos{ display:grid; gap:12px; grid-template-columns:1fr; }
    .modal-photos img{
      width:100%; height:auto; display:block; background:#fff;
      border-radius:12px; object-fit:contain;
    }
    .modal-recipe{ display:grid; gap:16px; grid-template-columns:1fr 1fr; }
    @media (max-width:900px){ .modal-recipe{ grid-template-columns:1fr; } }
    .modal-recipe h4{ margin:0 0 6px; }
    .modal-recipe ul,.modal-recipe ol{ margin:0 0 0 18px; }
    .muted{color:#6b7280;font-size:14px;}
  </style>
</head>
<body>
  <!-- Nav -->
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="./">JAN</a>
      <div class="nav-links">
        <a class="btn" href="work.html">Projects</a>
        <a class="btn" href="races.html">Races</a>
        <a class="btn" href="bake.html">Bake</a>
        <a class="btn" href="travel.html">Travel</a>
        <a class="btn" href="#contact">Contact</a>
      </div>
    </div>
  </nav>

  <main class="container work">
    <h1 class="page-title">Bake</h1>
    <p class="tag">Click a photo to open a lightbox ‚Äî second image + the recipe appear in the overlay.</p>

    <section class="rcp-grid" id="rcpGrid"><!-- cards injected by JS --></section>
  </main>

  <footer><div class="container">¬© <span id="y"></span> Jan Arroyo</div></footer>

  <!-- Lightbox -->
  <div class="modal-backdrop" id="rcpBackdrop"></div>
  <div class="modal-dialog" id="rcpDialog" aria-hidden="true">
    <article class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <header class="modal-head">
        <div>
          <div class="modal-title" id="modalTitle">Recipe</div>
          <div class="muted" id="modalMeta"></div>
        </div>
        <button class="modal-close" id="rcpClose" aria-label="Close">√ó</button>
      </header>
      <div class="modal-body">
        <div class="modal-photos">
          <img id="mImg1" alt="" loading="lazy">
          <img id="mImg2" alt="" loading="lazy">
        </div>
        <div class="modal-recipe">
          <div>
            <h4>Ingredients</h4>
            <ul id="mIngr"></ul>
          </div>
          <div>
            <h4>Steps</h4>
            <ol id="mSteps"></ol>
          </div>
        </div>
      </div>
    </article>
  </div>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    // Repo-safe image paths (works at /Personal-Portfolio and locally)
    const BASE = (() => {
      const seg = location.pathname.split('/')[1];
      return seg ? `/${seg}` : '';
    })();
    const p = (name) => `${BASE}/images/${name}`;

    // ===== Recipes =====
    const RECIPES = [
      {
        id:"jellycat",
        title:"Jellycat Birthday Cake",
        meta:"Author: Gail Ng ‚Ä¢ 8 servings ‚Ä¢ Total ~2h 30m (Prep 50m, Cook 40m, Cool 1h)",
        img1:p("JellyCat_1.jpg"),
        img2:p("JellyCat_2.jpg"),
        ingredientsHTML: `
          <li><strong>Equipment</strong>
            <ul>
              <li>Two 6&quot; round cake pans</li>
              <li>Electric hand mixer</li>
              <li>3 piping bags</li>
            </ul>
          </li>
          <li><strong>Cake Layers</strong>
            <ul>
              <li>225 g all-purpose flour</li>
              <li>1&nbsp;¬Ω tsp baking powder</li>
              <li>¬Ω tsp salt</li>
              <li>3 large eggs, room temperature</li>
              <li>225 g granulated sugar</li>
              <li>85 g unsalted butter</li>
              <li>190 g milk (dairy or non-dairy)</li>
              <li>2 tbsp oil</li>
              <li>1&nbsp;¬Ω tsp vanilla extract</li>
            </ul>
          </li>
          <li><strong>Filling</strong>
            <ul>
              <li>300 g whipping/heavy cream, cold</li>
              <li>30 g powdered sugar</li>
              <li>1 tsp vanilla extract</li>
              <li>1‚Äì2 tsp cocoa powder</li>
              <li>4 tbsp strawberry jam</li>
            </ul>
          </li>
          <li><strong>Decoration</strong>
            <ul>
              <li>2‚Äì3 fresh strawberries, halved</li>
              <li>1 birthday candle</li>
              <li>20 g dark chocolate, roughly chopped</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li><strong>Cake Layers</strong>
            <ol>
              <li>Preheat oven to 350¬∞F (177¬∞C). Line two 6&quot; pans with parchment rounds.</li>
              <li>Whisk flour, baking powder, and salt.</li>
              <li>Warm butter, milk, oil, and vanilla until butter melts (don‚Äôt boil).</li>
              <li>Beat eggs and sugar ~6 min on medium until very pale and tripled.</li>
              <li>Mix in half dry; then rest until mostly combined.</li>
              <li>On low, stream in warm milk mixture until smooth.</li>
              <li>Divide into pans halfway full; bake 35‚Äì40 min (toothpick with a few crumbs).</li>
              <li>Cool 15 min in pans; release and cool completely.</li>
            </ol>
          </li>
          <li><strong>Filling</strong>
            <ol>
              <li>Whip cream, sugar, and vanilla to soft peaks; reserve a little, then whip the rest to firm peaks.</li>
              <li>Tint the reserved cream with cocoa; transfer both creams to piping bags.</li>
            </ol>
          </li>
          <li><strong>Assemble & Decorate</strong>
            <ol>
              <li>Pipe dollops of whipped cream around the first layer‚Äôs edge; smear tails inward.</li>
              <li>Spread jam in the center.</li>
              <li>Add top layer; pipe more cream; add strawberry halves and candle.</li>
              <li>Pipe chocolate-tinted ‚Äúlegs‚Äù.</li>
              <li>Melt dark chocolate; pipe eyes + smile.</li>
            </ol>
          </li>
        `
      },
      {
        id:"thumbprint",
        title:"Thumbprint Cookies",
        img1:p("ThumbPrint_1.jpg"),
        img2:p("ThumbPrint_2.jpg"),
        img2Fallback:p("ThumPrint_2.jpg"),
        ingredientsHTML: `
          <li><strong>Cookie Dough</strong>
            <ul>
              <li>2 sticks unsalted butter, softened</li>
              <li>1 cup sugar (+ extra for rolling)</li>
              <li>2 egg yolks</li>
              <li>2¬Ω cups all-purpose flour</li>
              <li>1 tsp salt</li>
              <li>Strawberry jam</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Cream 2 sticks softened butter with 1 cup sugar.</li>
              <li>Mix in 2 egg yolks.</li>
              <li>Add 2¬Ω cups flour and 1 tsp salt; mix until a dough forms.</li>
              <li>Roll small balls; roll each in sugar.</li>
              <li>Place on a baking sheet and press your thumb into the center.</li>
              <li>Fill the indent with strawberry jam.</li>
              <li>Bake at 350¬∞F for 8‚Äì10 minutes. Cool and enjoy.</li>
            </ol>
          </li>
        `
      },
      {
        id:"confetti",
        title:"Confetti Cake",
        meta:"Celebration cake ‚Äî funfetti layers",
        img1:p("Confetti_Cake1.JPG"),
        img2:p("Confetti_Cake2.JPG"),
        ingredientsHTML:`<li>Recipe coming soon üéâ</li>`,
        stepsHTML:`<li>Bake, frost, celebrate!</li>`
      },
      {
        id:"lemon",
        title:"Lemon Cake",
        meta:"Bright + zesty",
        img1:p("LemonCake.JPG"),
        /* only one photo available; second will be hidden */
        ingredientsHTML:`<li>Recipe coming soon üçã</li>`,
        stepsHTML:`<li>More details coming soon.</li>`
      }
    ];

    // ===== Render cards =====
    const grid = document.getElementById('rcpGrid');
    RECIPES.forEach(r=>{
      const el=document.createElement('article');
      el.className='rcp-card';
      el.innerHTML = `
        <button class="rcp-toggle" data-id="${r.id}" aria-label="Open ${r.title}">
          <div class="rcp-photo">
            <img src="${r.img1}" alt="${r.title} cover" loading="lazy">
            <div class="rcp-caption">${r.title}</div>
          </div>
        </button>`;
      grid.appendChild(el);
    });

    // ===== Lightbox behavior (animated) =====
    const backdrop = document.getElementById('rcpBackdrop');
    const dialog   = document.getElementById('rcpDialog');
    const closeBtn = document.getElementById('rcpClose');
    const mTitle = document.getElementById('modalTitle');
    const mMeta  = document.getElementById('modalMeta');
    const mImg1  = document.getElementById('mImg1');
    const mImg2  = document.getElementById('mImg2');
    const mIngr  = document.getElementById('mIngr');
    const mSteps = document.getElementById('mSteps');
    const MS = 260;

    function openModal(recipe){
      mTitle.textContent = recipe.title;
      mMeta.textContent  = recipe.meta || "";
      mImg1.src = recipe.img1; mImg1.alt = `${recipe.title} image 1`;

      // second image (hide if missing)
      mImg2.onerror = null;
      if (recipe.img2){
        mImg2.style.display = '';
        mImg2.src = recipe.img2; mImg2.alt = `${recipe.title} image 2`;
        if (recipe.img2Fallback){
          mImg2.onerror = function(){ this.onerror=null; this.src = recipe.img2Fallback; };
        }
      } else {
        mImg2.style.display = 'none';
        mImg2.removeAttribute('src');
      }

      if (recipe.ingredientsHTML) mIngr.innerHTML = recipe.ingredientsHTML;
      else mIngr.innerHTML = (recipe.ingredients||[]).map(x=>`<li>${x}</li>`).join('');
      if (recipe.stepsHTML) mSteps.innerHTML = recipe.stepsHTML;
      else mSteps.innerHTML = (recipe.steps||[]).map(x=>`<li>${x}</li>`).join('');

      // reset any closing state
      dialog.classList.remove('closing'); backdrop.classList.remove('closing');

      document.body.classList.add('no-scroll');
      backdrop.classList.add('open');          // fades in backdrop
      dialog.classList.add('visible');         // mounts dialog first
      requestAnimationFrame(()=>{              // next frame: animate panel
        dialog.classList.add('open');
      });
    }

    function closeModal(){
      dialog.classList.add('closing'); backdrop.classList.add('closing');
      setTimeout(()=>{
        document.body.classList.remove('no-scroll');
        dialog.classList.remove('open','closing','visible');
        backdrop.classList.remove('open','closing');
      }, MS);
    }

    grid.addEventListener('click', (e)=>{
      const btn = e.target.closest('.rcp-toggle');
      if(!btn) return;
      const id = btn.dataset.id;
      const recipe = RECIPES.find(x=>x.id===id);
      if (recipe) openModal(recipe);
    });
    closeBtn.addEventListener('click', closeModal);
    backdrop.addEventListener('click', closeModal);
    dialog.addEventListener('click', (e)=>{ if(e.target === dialog) closeModal(); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });
  </script>
</body>
</html>
