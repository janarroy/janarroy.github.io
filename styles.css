/* ----------------------------------------------------
   Jan – Portfolio (clean, light theme + fixed flip card)
   ---------------------------------------------------- */

/* Theme tokens */
:root {
  --bg: #f6f7f9;          /* page background */
  --panel: #ffffff;       /* cards/panels */
  --muted: #60646c;       /* secondary text */
  --text: #111318;        /* primary text */
  --brand: #3b82f6;       /* accent */
  --ring: rgba(59,130,246,.25);

  /* Flip card sizing */
  --card-w: 520px;        /* tweak this to make it bigger/smaller */
  --card-ratio: 16 / 9;   /* 3/2 or 4/3 if that matches your photo better */
}

* { box-sizing: border-box; }
html, body { height: 100%; }

body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:
    radial-gradient(900px 600px at 15% -10%, rgba(59,130,246,.08), transparent 55%),
    radial-gradient(900px 600px at 115% 0%, rgba(2,132,199,.07), transparent 60%),
    var(--bg);
  color: var(--text);
}

a { color: inherit; text-decoration: none; }
.container { width: min(1100px, 92vw); margin: 0 auto; }

/* Navbar (light) */
.nav {
  position: sticky; top: 0; z-index: 50;
  backdrop-filter: blur(8px);
  background: linear-gradient(to bottom, rgba(255,255,255,.85), rgba(255,255,255,.65));
  border-bottom: 1px solid rgba(17,19,24,.08);
}
.nav-inner { display:flex; align-items:center; justify-content:space-between; padding:14px 0; }
.brand { font-weight: 800; letter-spacing:.3px; }
.nav a.btn { padding:10px 14px; border:1px solid rgba(17,19,24,.12); border-radius:999px; font-weight:600; color:var(--text); }
.nav a.btn:hover { background: rgba(17,19,24,.04); border-color: rgba(17,19,24,.18); }
.nav-links { display:flex; gap:8px; align-items:center; }

/* Hero / Splash */
.splash {
  padding: 90px 0 40px;
  display: grid; gap: 24px;
  grid-template-columns: 1.15fr .85fr;
  align-items: center;
  min-height: calc(100vh - 70px);
}
@media (max-width: 900px){ .splash { grid-template-columns: 1fr; } }

.console-line {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  color:#0f5132; background:#e6f4ea; border:1px solid #cfead8;
  padding:8px 10px; border-radius: 10px; width: fit-content;
  box-shadow: 0 0 0 6px rgba(16,185,129,.15);
}
.console-line .caret{ margin-left:6px; color:#2aa36b; opacity:.9; animation: blink 1s steps(1) infinite; }
@keyframes blink { 50% { opacity:.2; } }

.name { font-size: clamp(28px, 5vw, 52px); line-height: 1.05; margin: 14px 0 0; }
.name span {
  background: linear-gradient(90deg, #2563eb, #0ea5e9);
  -webkit-background-clip: text; background-clip: text; color: transparent;
}

.tag { color: var(--muted); font-size: clamp(16px, 2.2vw, 18px); margin: 8px 0 0; }
.cta-row { display:flex; gap:10px; margin-top:18px; flex-wrap:wrap; }
.primary { background: var(--brand); color:#fff; border-radius:12px; padding:12px 16px; font-weight:700; border:1px solid transparent; }
.primary:hover { filter:brightness(1.05); box-shadow: 0 0 0 6px var(--ring); }
.ghost { background:#fff; border:1px solid rgba(17,19,24,.12); color:var(--text); border-radius:12px; padding:12px 16px; font-weight:700; }
.ghost:hover { background: rgba(17,19,24,.05); }

/* Right column layout */
.splash-right { display:flex; flex-direction:column; gap:14px; align-items:flex-start; }

/* ---------- Rotating line under the name ---------- */
.rotate-line{
  margin-top: 10px;
  font-size: clamp(16px, 2.2vw, 18px);
  color: var(--muted);
  min-height: 1.6em;      /* avoid layout shift while typing */
  letter-spacing: .1px;
  white-space: nowrap;
}
.caret{ margin-left:6px; opacity:.9; animation: blink 1s steps(1) infinite; }
.rotate-line .caret { color:#6b7280; }

/* ---------- Panels / generic ---------- */
section { padding: 56px 0; }
.panel {
  background: var(--panel);
  border:1px solid rgba(17,19,24,.10);
  border-radius:16px;
  padding:18px;
  box-shadow: 0 10px 30px rgba(17,19,24,.04);
}

/* ---------- Work page ---------- */
.work { padding: 80px 0 40px; }
.page-title { font-size: 28px; margin: 0 0 18px; }
.filters { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:14px; }
.chip { border:1px solid rgba(17,19,24,.12); padding:8px 12px; border-radius:999px; font-size:13px; color:var(--muted); cursor:pointer; }
.chip.active { background: rgba(59,130,246,.12); color:#1e40af; border-color: rgba(59,130,246,.35); }

/* Masonry */
.masonry { column-count:1; column-gap:16px; }
@media (min-width:640px){ .masonry { column-count:2; } }
@media (min-width:980px){ .masonry { column-count:3; } }
.card { break-inside:avoid; margin:0 0 16px; display:block; }
.card .thumb { border-radius:14px; overflow:hidden; border:1px solid rgba(17,19,24,.10); }
.card img { width:100%; display:block; height:auto; }
.card .meta { padding:10px 4px 0; }
.card .meta .tag { font-size:12px; color:#1e40af; }
.card .meta h3 { margin:6px 0 4px; font-size:16px; }
.card .meta p { margin:0; color:var(--muted); font-size:14px; }

/* Lightbox (unchanged structure, light colors) */
.lightbox { position:fixed; inset:0; background: rgba(0,0,0,.6); display:none; align-items:center; justify-content:center; padding:24px; }
.lightbox.open { display:flex; }
.lightbox-content { background:#fff; border:1px solid rgba(17,19,24,.10); border-radius:14px; max-width:1100px; width:100%; overflow:hidden; }
.lightbox-header { display:flex; justify-content:space-between; align-items:center; padding:10px 14px; border-bottom:1px solid rgba(17,19,24,.08); }
.lightbox-body { max-height:70vh; overflow:auto; }
.lightbox-body img { width:100%; height:auto; display:block; }
.close { background:transparent; border:1px solid rgba(17,19,24,.2); color:var(--text); border-radius:10px; padding:6px 10px; cursor:pointer; }

/* Footer */
footer { padding: 40px 0 70px; color: var(--muted); text-align:center; font-size:13px; }

/* Timeline */
.timeline { display:grid; gap:14px; }
@media (min-width:860px){ .timeline { grid-template-columns:1fr 1fr; } }
.item h4 { margin:0; font-size:18px; }
.item .org { color:#374151; font-weight:600; }
.item .time { color:var(--muted); font-size:13px; }
.item ul { margin:10px 0 0 18px; color:var(--muted); }

/* ---------- Spotify heading ---------- */
.spotify-title{ margin:6px 0 8px; font-size:16px; color:#374151; font-weight:700; }

/* ====================================================
   FLIP CARD (RIGHT COLUMN) – FIXED SIZE, NO JUMPING
   ==================================================== */
   .flip-card{
      perspective: 1200px;
      width: 100%;
      max-width: var(--card-w);
    }
    
    .flip-inner{
      position: relative;
      width: 100%;
      aspect-ratio: var(--card-ratio); /* keeps the “normal” shape */
      height: auto;                    /* let aspect-ratio control height */
      transform-style: preserve-3d;
      transition: transform 1.1s ease-in-out; /* slower & smoother */
      border-radius: 16px;
    }
    
    /* Faces fill that box exactly */
    .flip-face{
      position: absolute; inset: 0;
      backface-visibility: hidden; -webkit-backface-visibility: hidden;
      border-radius: 16px; overflow: hidden;
      box-shadow: 0 12px 30px rgba(17,19,24,.06);
      border: 1px solid rgba(17,19,24,.10);
    }
    
    .flip-front img{
      width: 100%;
      height: 100%;
      object-fit: cover; /* natural landscape look without stretching */
      display: block;
    }
    
    /* Back remains the same size as the front */
    .flip-back{ transform: rotateY(180deg); background: var(--panel); color: var(--text); }
    .about-back{ height: 100%; padding: 16px; overflow: auto; }

/* Back content */
.about-avatar{
  width: 96px; height: 96px; border-radius: 9999px;
  object-fit: cover; display:block;
  border: 1px solid rgba(17,19,24,.12);
  box-shadow: 0 6px 16px rgba(17,19,24,.08);
  margin-bottom: 10px;
}
.about-intro{ margin:0 0 8px; }
.about-bullets{ margin:8px 0 12px; padding-left:18px; color:var(--muted); }
.about-bullets li{ margin:4px 0; }

.about-links{ display:flex; gap:8px; flex-wrap:wrap; }
.link-pill{
  display:inline-flex; align-items:center; gap:6px;
  padding:8px 12px; border-radius:999px; background:#fff;
  color:var(--text); border:1px solid rgba(17,19,24,.12);
  text-decoration:none; font-size:14px;
}
.link-pill:hover{ background: rgba(17,19,24,.05); }

/* === Flip card – force size + smooth spin === */
.flip-card{
  position: relative;          /* ensure it can sit above embeds */
  z-index: 1;
  perspective: 1200px;
  width: 100%;
  max-width: 520px;            /* change to resize card */
}
.flip-inner{
  position: relative;
  width: 100%;
  aspect-ratio: 3 / 2;         /* 3/2 looks like a normal photo; try 4/3 or 16/9 */
  transform-style: preserve-3d;
  transition: transform 1.2s ease-in-out;  /* slower + smoother */
  border-radius: 16px;
}
.flip-card:hover .flip-inner,
.flip-card.flipped .flip-inner{
  transform: rotateY(180deg);
}
.flip-face{
  position: absolute; inset: 0;
  backface-visibility: hidden; -webkit-backface-visibility: hidden;
  border-radius: 16px; overflow: hidden;
  box-shadow: 0 12px 30px rgba(17,19,24,.06);
  border: 1px solid rgba(17,19,24,.10);
}
.flip-front img{
  width: 100%; height: 100%;
  object-fit: cover; display: block;
}
.flip-back{
  transform: rotateY(180deg);
  background: var(--panel); color: var(--text);
}
.about-back{
  height: 100%;
  padding: 16px;
  overflow: auto; /* just in case text is taller than card */
}
.about-avatar{
  width: 96px; height: 96px; border-radius: 9999px;
  object-fit: cover; display:block;
  border: 1px solid rgba(17,19,24,.12);
  box-shadow: 0 6px 16px rgba(17,19,24,.08);
  margin-bottom: 10px;
}

/* make sure the playlist doesn't overlap hover area */
.spotify-wrap { position: relative; z-index: 0; }
/* === Flip card (final) — correct size, smooth spin, no cropping === */
:root{
  /* tune these two to your taste */
  --card-w: 560px;     /* overall width of the photo/card */
  --card-ratio: 3 / 2; /* 3/2 looks like a normal camera photo; try 4/3 or 16/9 */
}

.flip-card{
  position: relative;
  z-index: 1;
  perspective: 1200px;
  width: 100%;
  max-width: var(--card-w);
}

.flip-inner{
  position: relative;
  width: 100%;
  aspect-ratio: var(--card-ratio);   /* keeps “normal” photo shape */
  transform-style: preserve-3d;
  transition: transform 1.25s ease-in-out; /* slower, smoother */
  border-radius: 16px;
}

.flip-card:hover .flip-inner,
.flip-card.flipped .flip-inner{      /* mobile tap can toggle .flipped */
  transform: rotateY(180deg);
}

.flip-face{
  position: absolute; inset: 0;
  backface-visibility: hidden; -webkit-backface-visibility: hidden;
  border-radius: 16px; overflow: hidden;
  box-shadow: 0 12px 30px rgba(17,19,24,.06);
  border: 1px solid rgba(17,19,24,.10);
}

/* FRONT: show whole image without cropping */
.flip-front img{
  width: 100%;
  height: 100%;
  object-fit: contain;       /* <— ensures the whole photo is visible */
  background: #fff;          /* behind letterboxing if any */
  display: block;
}

/* BACK: same size as front */
.flip-back{
  transform: rotateY(180deg);
  background: var(--panel);
  color: var(--text);
}
.about-back{
  height: 100%;
  padding: 16px;
  overflow: auto;            /* scroll if text is tall */
}

/* Back content */
.about-avatar{
  width: 112px; height: 112px; border-radius: 9999px;
  object-fit: cover; display:block;
  border: 1px solid rgba(17,19,24,.12);
  box-shadow: 0 6px 16px rgba(17,19,24,.08);
  margin-bottom: 10px;
}

/* === Flip card (portrait image, smooth spin, no bars) === */
:root{
  --card-w: 560px;        /* width of the card; tweak to taste */
  --card-ratio: 3 / 4;    /* your beach photo is portrait; try 4/5 if needed */
}

.flip-card{
  position: relative;
  z-index: 1;
  perspective: 1200px;
  width: 100%;
  max-width: var(--card-w);
}

.flip-inner{
  position: relative;
  width: 100%;
  aspect-ratio: var(--card-ratio);   /* now matches your photo shape */
  transform-style: preserve-3d;
  transition: transform 1.25s ease-in-out; /* slower & smoother */
  border-radius: 16px;
}

.flip-card:hover .flip-inner,
.flip-card.flipped .flip-inner{
  transform: rotateY(180deg);
}

.flip-face{
  position: absolute; inset: 0;
  backface-visibility: hidden; -webkit-backface-visibility: hidden;
  border-radius: 16px; overflow: hidden;
  box-shadow: 0 12px 30px rgba(17,19,24,.06);
  border: 1px solid rgba(17,19,24,.10);
}

/* FRONT: show full image */
.flip-front img{
  width: 100%;
  height: 100%;
  object-fit: contain;   /* show whole photo, no cropping */
  display: block;
  /* removed background:#fff; to avoid the “widget” bars */
}

/* BACK: same size */
.flip-back{
  transform: rotateY(180deg);
  background: var(--panel);
  color: var(--text);
}
.about-back{
  height: 100%;
  padding: 16px;
  overflow: auto;
}

/* Circular headshot on back */
.about-avatar{
  width: 112px; height: 112px; border-radius: 9999px;
  object-fit: cover; display:block;
  border: 1px solid rgba(17,19,24,.12);
  box-shadow: 0 6px 16px rgba(17,19,24,.08);
  margin-bottom: 10px;
}



/* Arrows & dots */
.race-slider .nav{
position:absolute; top:50%; transform:translateY(-50%);
background: rgba(17,19,24,.65); color:#fff; border:0;
width:36px; height:36px; border-radius:999px; display:grid; place-items:center; cursor:pointer;
z-index: 2;
}
.race-slider .prev{ left:10px; }
.race-slider .next{ right:10px; }
.race-slider .nav:hover{ background: rgba(17,19,24,.8); }

.race-slider .dots{
position:absolute; left:50%; bottom:10px; transform:translateX(-50%);
display:flex; gap:6px; z-index: 2;
}
.race-slider .dots button{
width:8px; height:8px; border-radius:999px; border:0;
background: rgba(17,19,24,.25); cursor:pointer;
}
.race-slider .dots button.active{ background: rgba(17,19,24,.6); }

/* Page background: keep races page solid */
body.plain-bg{
background: var(--bg) !important;
background-image: none !important;
}

/* --- Race stats (count-up) --- */
.race-stats{
display:grid;
grid-template-columns: repeat(3, minmax(0,1fr));
gap:12px;
margin:14px 0 6px;
}

.race-stats .stat{
position: relative;
background:#fff;
border:1px solid rgba(0,0,0,.06);
border-radius:14px;
padding:12px 14px;
text-align:center;
box-shadow: 0 6px 18px rgba(0,0,0,.05);
overflow:hidden;
}
.race-stats .stat::after{
content:"";
position:absolute; inset:-1px;
border-radius:14px;
padding:1px;
background: linear-gradient(120deg, rgba(59,130,246,.45), rgba(14,165,233,.35));
-webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
-webkit-mask-composite:xor; mask-composite:exclude;
pointer-events:none;
}

.stat-number{
font-size: clamp(22px, 2.8vw, 28px);
font-weight:800;
letter-spacing:.3px;
background:linear-gradient(90deg,#1d4ed8,#06b6d4);
-webkit-background-clip:text; background-clip:text;
color:transparent;
transform:translateY(2px);
}
.stat-label{
margin-top:6px;
font-size:12px;
letter-spacing:.2px;
color:#6b7280;
}

/* reveal animation */
.race-stats[data-animate]{ opacity:0; transform:translateY(8px); transition:.45s ease; }
.race-stats[data-animate].on{ opacity:1; transform:translateY(0); }

/* ==== caption panel inside the slider ==== */
.race-slider{
position: relative;
width: 100%;
max-width: 720px;
aspect-ratio: 4 / 3;         /* consistent frame; change to 3/2 or 16/9 if you prefer */
border-radius: 14px;
overflow: hidden;
background: #000;
}
.race-slider .slides{
display: grid;
grid-auto-flow: column;
grid-auto-columns: 100%;
width: 100%;
height: 100%;
transition: transform .45s ease;
align-items: center;
}
.race-slider .slides > img,
.race-slider .slides > video{
width: 100%;
height: 100%;
object-fit: cover;           /* crop to fill */
display: block;
}

/* right-side caption living on top of the media */
.race-caption{
position: absolute;
inset: 0 0 0 auto;          /* anchor to the right */
width: 42%;
height: 100%;
display: flex;
flex-direction: column;
justify-content: center;
gap: 10px;
padding: 18px 18px 18px 16px;
color: #fff;
background: linear-gradient(90deg, rgba(0,0,0,.05) 0%, rgba(0,0,0,.55) 40%, rgba(0,0,0,.70) 100%);
backdrop-filter: blur(4px);
}
.race-caption .race-title{ margin: 0; }
.race-caption .race-meta{ color: rgba(255,255,255,.75); font-size: 12px; }
.race-caption p{ margin: 4px 0 0; font-size: 14px; line-height: 1.45; }
.race-caption .race-bullets{ margin: 6px 0 0; padding-left: 16px; font-size: 13px; }

/* reuse your stats, but make them fit the dark panel */
.race-caption .race-stats{
display: grid;
grid-template-columns: repeat(3,1fr);
gap: 8px;
margin: 6px 0 2px;
}
.race-caption .stat{
background: rgba(255,255,255,.08);
border: 1px solid rgba(255,255,255,.12);
box-shadow: none;
}
.race-caption .stat-number{
background: linear-gradient(90deg, #93c5fd, #22d3ee);
-webkit-background-clip: text; background-clip: text;
color: transparent;
}
.race-caption .stat-label{ color: rgba(255,255,255,.8); }

/* Mobile: caption becomes full-width bar at the bottom */
@media (max-width: 760px){
.race-caption{
  width: 100%;
  height: auto;
  bottom: 0; top: auto;
  padding: 12px 14px;
  background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.65) 30%, rgba(0,0,0,.75) 100%);
}
.race-caption .race-stats{
  grid-template-columns: repeat(3,minmax(0,1fr));
}
}

/* === Race card layout: media LEFT | caption RIGHT === */
.race-body{
display: grid;
grid-template-columns: minmax(0, 58%) minmax(0, 42%);
grid-template-areas: "media notes";
gap: 16px;
align-items: stretch;
}
.race-slider{ grid-area: media; }
.race-caption{ grid-area: notes; }

/* Slider frame (keep your card look, but no crop) */
.race-slider{
position: relative;
width: 100%;
max-width: none;            /* fill the left column */
aspect-ratio: 4 / 3;
border-radius: 14px;
overflow: hidden;
background: #000;           /* letterboxing behind contain */
}
.race-slider .slides{
display: grid;
grid-auto-flow: column;
grid-auto-columns: 100%;
width: 100%;
height: 100%;
transition: transform .45s ease;
align-items: center;
}
/* show the ENTIRE photo/video (no cropping) */
.race-slider .slides > img,
.race-slider .slides > video{
width: 100%;
height: 100%;
object-fit: contain;        /* <= full image; switch to 'cover' if you want crop */
display: block;
background: #000;           /* behind letterbox */
}

/* Caption as a normal right-hand panel (light theme) */
.race-caption{
position: static;           /* not overlay */
inset: auto; width: auto; height: auto;
color: var(--text);
background: var(--panel);
border: 1px solid rgba(17,19,24,.10);
border-radius: 14px;
padding: 16px;
display: flex;
flex-direction: column;
justify-content: center;
gap: 10px;
backdrop-filter: none;
}
.race-caption .race-title{ margin: 0; }
.race-caption .race-meta{ color: var(--muted); font-size: 12px; }
.race-caption p{ margin: 4px 0 0; font-size: 14px; line-height: 1.5; }
.race-caption .race-bullets{ margin: 6px 0 0; padding-left: 16px; font-size: 13px; }

/* Stats in light panel (override the darker overlay styles) */
.race-caption .race-stats{
display: grid;
grid-template-columns: repeat(3,1fr);
gap: 10px;
margin: 6px 0 2px;
}
.race-caption .stat{
background: #fff;
border: 1px solid rgba(0,0,0,.06);
box-shadow: 0 6px 18px rgba(0,0,0,.05);
}
.race-caption .stat-number{
background: linear-gradient(90deg,#1d4ed8,#06b6d4);
-webkit-background-clip: text; background-clip: text;
color: transparent;
}
.race-caption .stat-label{ color: #6b7280; }

/* Mobile: stack media above caption */
@media (max-width: 760px){
.race-body{
  grid-template-columns: 1fr;
  grid-template-areas:
    "media"
    "notes";
}
}

/* === Card header: title left, date right (same line) === */
.race-bar{
display:flex;
align-items:center;
justify-content:space-between;
gap:12px;
}
.race-bar h2{ margin:0; }
.race-bar .race-date{ color:var(--muted); font-size:13px; }

/* === Two-column card: media LEFT | caption RIGHT === */
.race-body{
display:grid;
grid-template-columns: minmax(0,60%) minmax(0,40%);
grid-template-areas: "media notes";
gap:18px;
}
@media (max-width: 900px){
.race-body{
  grid-template-columns:1fr;
  grid-template-areas:
    "media"
    "notes";
}
}
.race-slider{ grid-area: media; }
.race-caption{ grid-area: notes; }

/* === Auto-height slider (no crop) === */
.race-slider{
position: relative;
width: 100%;
border-radius: 14px;
overflow: hidden;
background: #000;            /* behind letterboxes */
height:auto;                 /* JS will set explicit height */
max-height:none;
}
.race-slider .slides{
display: grid;
grid-auto-flow: column;
grid-auto-columns: 100%;
align-items: start;          /* use media's natural height */
transition: transform .45s ease;
}
.race-slider .slides > img,
.race-slider .slides > video{
width: 100%;
height: auto;                /* <-- key: use natural aspect */
object-fit: contain;         /* show the whole image */
display: block;
background:#000;
border-radius: 14px;         /* keeps corners on tall images */
}

/* === Right panel: slightly larger, easier reading === */
.race-caption{
background: var(--panel);
border: 1px solid rgba(17,19,24,.10);
border-radius: 14px;
padding: 18px 18px 16px;
}
.race-caption .race-title{ margin:0 0 2px; }
.race-caption .race-meta{ color:var(--muted); font-size:13px; margin-bottom:8px; }
.race-caption p{ font-size:15.5px; line-height:1.6; margin:8px 0 4px; }
.race-caption .race-bullets{ font-size:14px; line-height:1.5; margin-top:8px; }

/* stat tiles spacing tweaks so they breathe a bit more */
.race-caption .race-stats{ gap:12px; margin: 6px 0 4px; }
.stat-number{ font-size: clamp(22px,2.2vw,30px); }

.race-slider{ background:#fff; }          /* letterbox matches the card */
.race-slider .slides{ align-items: center; }  /* center image vertically */
.race-slider .slides > img,
.race-slider .slides > video{ background:#fff; } /* no dark bars inside */

@media (min-width: 901px){
.race-slider{ max-height: 620px; }  /* tweak to taste */
}

.race .race-bar{
display:flex;
align-items:center;
justify-content:space-between;
gap:12px;
}
.race .race-bar h2{ margin:0; }
.race .race-bar .race-date{ color:var(--muted); font-size:13px; }

/* ==== FINAL OVERRIDES – put at the very end of styles.css ==== */

/* Title left, date right (one line) */
.race .race-bar{
display:flex !important;
align-items:center !important;
justify-content:space-between !important;
gap:12px !important;
}
.race .race-bar h2{ margin:0 !important; }
.race .race-bar .race-date{ color:var(--muted); font-size:13px; }

/* Two-column layout: media left (60%), notes right (40%) */
.race-body{
display:grid !important;
grid-template-columns:minmax(0,60%) minmax(0,40%) !important;
grid-template-areas:"media notes" !important;
gap:18px !important;
}
.race-slider{ grid-area:media !important; }
.race-caption{ grid-area:notes !important; }

/* Auto-height slider — JS controls the height */
.race-slider{
position: relative;
width: 100%;
/* let JS set inline height (no !important here) */
aspect-ratio: auto;
border-radius: 14px;
overflow: hidden;
background: #fff; /* matches the card; prevents dark bars */
}

.race-slider .slides{
display: grid;
grid-auto-flow: column;
grid-auto-columns: 100%;
align-items: center;       /* center the media vertically */
transition: transform .45s ease;
}

/* Media fills the slider’s computed height without cropping */
.race-slider .slides > img,
.race-slider .slides > video{
width: 100%;
height: auto;              /* <-- was auto; this removes the top white band */
object-fit: contain;       /* show full image/video */
display: block;
background: #fff;
border-radius: 14px;
}

/* Optional desktop cap (keep or remove) */
@media (min-width:901px){
.race-slider{ max-height: 620px; }
}

/* Right panel readability */
.race-caption{
position:static !important;
background:var(--panel) !important;
border:1px solid rgba(17,19,24,.10) !important;
border-radius:14px !important;
padding:18px 18px 16px !important;
}
.race-caption p{ font-size:15.5px; line-height:1.6; }
.race-caption .race-bullets{ font-size:14px; line-height:1.5; }
.race-slider .dots button.on{ background: rgba(17,19,24,.6); }

/* --- slider gap fix (final) --- */
.race-slider .slides{
align-items: start !important;   /* use the media's natural height */
}

.race-slider .slides > img,
.race-slider .slides > video{
display: block;
margin: 0;                       /* no stray inline spacing */
}
/* --- slider no-crop final overrides --- */
.race-slider .slides{
align-items: start !important;   /* stop vertical centering that “cuts” top/bottom */
}

.race-slider .slides > img,
.race-slider .slides > video{
width: 100% !important;
height: auto !important;         /* let the media keep its natural aspect */
object-fit: contain !important;  /* never crop */
display: block;
}

/* If you still see any cutoff on tall photos, remove the desktop cap: */
@media (min-width:901px){
.race-slider{ max-height: none !important; }  /* or just delete this block */
}

/* (Optional) make the active dot actually show */
.race-slider .dots button.on{ background: rgba(17,19,24,.6); }

/* ===== React Races widget (scoped) ===== */
.react-wrap{ display:block; }
.react-head{ display:flex; gap:14px; align-items:flex-end; justify-content:space-between; margin:0 0 18px; flex-wrap:wrap; }
.react-h1{ margin:0; font-size:28px; }
.react-sub{ margin:0; color:#60646c; font-size:14px; }

/* badges */
.react-badges{ display:flex; gap:8px; flex-wrap:wrap; }
.react-pill{ display:inline-flex; align-items:center; gap:8px; border:1px solid rgba(17,19,24,.12); background:#fff; padding:8px 12px; border-radius:999px; box-shadow:0 1px 8px rgba(0,0,0,.04); }
.react-pill-emoji{ font-size:14px; }
.react-pill-label{ font-size:13px; font-weight:600; }
.react-pill-count{ font-size:12px; background:#f3f4f6; border-radius:999px; padding:2px 6px; }

/* cards */
.react-stack{ display:grid; gap:16px; }
.react-card{ background:#fff; border:1px solid rgba(17,19,24,.10); border-radius:16px; padding:16px; box-shadow:0 10px 30px rgba(17,19,24,.04); }
.react-bar{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px; }
.react-bar h2{ margin:0; font-size:18px; }
.react-date{ color:#60646c; font-size:13px; }

/* layout */
.react-grid{ display:grid; gap:16px; grid-template-columns: minmax(0,58%) minmax(0,42%); align-items:stretch; }
@media (max-width:900px){ .react-grid{ grid-template-columns:1fr; } }
.react-col-media{ min-width:0; }
.react-col-notes{ min-width:0; display:flex; flex-direction:column; gap:10px; background:#fff; border:1px solid rgba(17,19,24,.10); border-radius:14px; padding:14px; }

/* text */
.react-title{ margin:0; font-size:16px; }
.react-meta{ color:#6b7280; font-size:12px; }
.react-text{ margin:4px 0 0; font-size:15px; line-height:1.55; color:#111318; }
.react-bullets{ margin:6px 0 0 18px; color:#374151; font-size:14px; }

/* stats */
.react-stats{ display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:10px; }
.react-stat{ background:#fff; border:1px solid rgba(0,0,0,.06); border-radius:12px; padding:10px; text-align:center; box-shadow:0 6px 18px rgba(0,0,0,.05); }
.react-stat-number{ font-weight:800; letter-spacing:.2px; font-size:22px; background:linear-gradient(90deg,#1d4ed8,#06b6d4); -webkit-background-clip:text; background-clip:text; color:transparent; }
.react-stat-label{ font-size:12px; color:#6b7280; margin-top:4px; }

/* slider (no-crop) */
.react-slider{ position:relative; width:100%; border-radius:14px; overflow:hidden; background:#fff; }
.react-slides{ display:grid; grid-auto-flow:column; grid-auto-columns:100%; transition: transform .35s ease; }
.react-slide{ display:flex; align-items:flex-start; justify-content:center; }
.react-media{ width:100%; height:auto; object-fit:contain; display:block; background:#fff; border-radius:14px; max-height:80vh; }
.react-video{ background:#000; }

/* arrows & dots */
.react-nav{ position:absolute; top:50%; transform:translateY(-50%); z-index:2; width:36px; height:36px; border-radius:999px; border:0; cursor:pointer;
background:rgba(17,19,24,.65); color:#fff; display:grid; place-items:center; }
.react-prev{ left:10px; } .react-next{ right:10px; }
.react-nav:hover{ background:rgba(17,19,24,.8); }
.react-dots{ position:absolute; left:50%; bottom:10px; transform:translateX(-50%); display:flex; gap:6px; z-index:2; }
.react-dot{ width:8px; height:8px; border-radius:999px; border:0; background:rgba(17,19,24,.25); cursor:pointer; }
.react-dot.on{ background:rgba(17,19,24,.6); }

/* chart */
.react-chart-title{ font-size:13px; font-weight:700; color:#374151; margin-bottom:8px; }
.react-chart{ border:1px solid rgba(17,19,24,.10); border-radius:12px; }
.react-chart-legend{ display:flex; flex-wrap:wrap; gap:6px; margin-top:8px; }
.react-chip{ font-size:12px; padding:3px 6px; border:1px solid rgba(17,19,24,.12); border-radius:999px; background:#fff; color:#374151; }